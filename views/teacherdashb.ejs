
<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8">
    <title>Teacher Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="../css/dash.css">

    

</head>

<body >

    <div class="navbar-fixed">
        <nav class="nav-natanedu">
            <div class="nav-wrapper">
              <a href="#" class="brand-logo"> 
                <img src="../img/logo.png" class="size-35 logo-nav"/>
              </a>
              <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="/profile">profile</a></li>
                
              </ul>
            </div>
            
          </nav>
    
    </div>
    <div class="contaier" id="main">
        <div class="row">
            <div class="col s12">
                <div class="row">
                  <div class="col s4"></div>
                  
                  <div class="col s4">
                     
                          <ul class="collection" id="notification">
                          </ul>
                      
                  </div>
                  
                  <div class="col s4"></div>
                </div>
               
            </div>
        </div>
    </div>
              
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!-- web3 -->
    <script src="../js/makenotifcation.js"></script>
    <script src="../web3/web3.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
    
    <script>
      $( document ).ready(function() {
        var elems_lang = document.querySelectorAll('#language-input .dropdown-trigger');
                M.Dropdown.init(elems_lang, {});

               
            });
              var data;
            var socket = io.connect('http://localhost:8080/teachers');
              socket.on('ready', function(){
                  const hash = account;
                  console.log(hash);
                  const data = { wallet: hash, topic: "math", country: "tunisia" };

                  socket.emit("try-to-join", data);
                 
                    
                });
                socket.on('joined', function(data){
                  console.log(data);
                 
                    
                });
                var topic="math";
                var title="Your courses";
                socket.on("class-available", function(student){
                  console.log(student);
                 
                  data=student;//JSON.parse(student);
                  data.topic=topic;
                  createNotification(title,data);
                  /*$("#notification").append('<div class="row">'+
                                              '<div class="col s12 m12">'+
                                                '<div class="card blue-grey lighten-5">'+
                                                  '<div class="card-content black-text">'+
                                                    '<span class="card-title title-center">new course in '+topic+'</span>'+
                                                        '<div class="row"><p class="pad-l-5">'+data.student_name+' want a course with '+data.prize+'</p></div>'+
                                                    '</div>'+
                                                  '<div class="card-action">'+
                                                    '<button class="waves-effect waves-light btn-flat ">denied</button>'+
                                                    '<button class="waves-effect waves-teal btn accent-color">accept</button>'+
                                                  '</div></div></div></div>'
                                             )*/
                  $("#notification").append('<li class="collection-item avatar item-list" style="padding-left:20px;padding-top:20px;">'+
                    '<span class="title">'+data.student_name+'</span>'+
                    ' <p>'+
                      'want a course with '+data.prize+
                      '</p>'+
                      '<div class="secondary-content">'+
                        '<button class="col s8 waves-effect waves-teal btn btn-small accent-color">accept</button>'+
                        '<button class="col s8 waves-effect waves-light btn-flat btn-small red-text">denied</button>'+  
                    '</div>'+
                    '</li>')
                    
                });
                
                function accecpt(){
                  
                  socket.emit("class-accepted", data.id);
                }
    </script>
 
</body>
</html>